<div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
    <div class="stat-card bg-gradient-to-br from-pink-400 to-purple-600">
        <i class="fas fa-users text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_users }}</p>
        <p class="text-white opacity-90">T·ªïng ng∆∞·ªùi d√πng</p>
    </div>

    <div class="stat-card bg-gradient-to-br from-blue-400 to-cyan-600">
        <i class="fas fa-newspaper text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_posts }}</p>
        <p class="text-white opacity-90">T·ªïng b√†i vi·∫øt</p>
    </div>

    <div class="stat-card bg-gradient-to-br from-green-400 to-teal-600">
        <i class="fas fa-user-md text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_experts }}</p>
        <p class="text-white opacity-90">Chuy√™n gia</p>
    </div>

    <div class="stat-card bg-gradient-to-br from-yellow-400 to-orange-600">
        <i class="fas fa-coins text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_points }}</p>
        <p class="text-white opacity-90">T·ªïng ƒëi·ªÉm t√≠ch l≈©y</p>
    </div>

    <!-- üî• TH·ªêNG K√ä T∆Ø∆†NG T√ÅC -->
    <div class="stat-card bg-gradient-to-br from-indigo-400 to-purple-600">
        <i class="fas fa-eye text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_views }}</p>
        <p class="text-white opacity-90">T·ªïng l∆∞·ª£t xem</p>
    </div>

    <div class="stat-card bg-gradient-to-br from-pink-400 to-red-600">
        <i class="fas fa-heart text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_likes }}</p>
        <p class="text-white opacity-90">T·ªïng l∆∞·ª£t th√≠ch</p>
    </div>

    <div class="stat-card bg-gradient-to-br from-blue-400 to-indigo-600">
        <i class="fas fa-comments text-4xl text-white opacity-80"></i>
        <p class="text-4xl font-bold text-white">{{ stats.total_comments }}</p>
        <p class="text-white opacity-90">T·ªïng b√¨nh lu·∫≠n</p>
    </div>
</div>

<!-- üî• TH·ªêNG K√ä THEO NG∆Ø·ªúI D√ôNG (TH√äM M·ªöI) -->
<div class="bg-white rounded-xl shadow-lg p-6 mb-8">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">Th·ªëng k√™ theo ng∆∞·ªùi d√πng</h3>
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Ng∆∞·ªùi d√πng
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Vai tr√≤
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        ƒêi·ªÉm
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        B√†i vi·∫øt
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        L∆∞·ª£t xem
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        L∆∞·ª£t th√≠ch
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        B√¨nh lu·∫≠n
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        H√†nh ƒë·ªông
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for user_stat in user_stats %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10">
                                <img class="h-10 w-10 rounded-full" src="{{ url_for('static', filename=user_stat.avatar or 'images/default-avatar.png') }}" alt="">
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">{{ user_stat.name }}</div>
                                <div class="text-sm text-gray-500">{{ user_stat.email }}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            {% if user_stat.role == 'admin' %}bg-red-100 text-red-800
                            {% elif user_stat.is_verified_expert %}bg-green-100 text-green-800
                            {% else %}bg-gray-100 text-gray-800{% endif %}">
                            {% if user_stat.role == 'admin' %}Admin
                            {% elif user_stat.is_verified_expert %}Chuy√™n gia
                            {% else %}Ng∆∞·ªùi d√πng{% endif %}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ user_stat.points }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ user_stat.post_count }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ user_stat.total_views }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ user_stat.total_likes }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ user_stat.total_comments }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="viewUserStats({{ user_stat.id }})" class="text-indigo-600 hover:text-indigo-900">
                            Xem chi ti·∫øt
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- üî• TH·ªêNG K√ä THEO CH·ª¶ ƒê·ªÄ -->
<div class="bg-white rounded-xl shadow-lg p-6">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">Th·ªëng k√™ theo ch·ªß ƒë·ªÅ</h3>
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        {% set topics = {'health': 'S·ª©c kh·ªèe', 'nutrition': 'Dinh d∆∞·ª°ng', 'story': 'T√¢m s·ª±', 'tips': 'M·∫πo hay', 'other': 'Kh√°c'} %}
        {% for code, name in topics.items() %}
        <div class="bg-gray-50 rounded-lg p-4 text-center hover:shadow-md transition">
            <p class="font-medium text-gray-700">{{ name }}</p>
            <p class="text-3xl font-bold text-pink-600 mt-2">{{ topic_stats.get(code, 0) }}</p>
            <p class="text-sm text-gray-500">b√†i vi·∫øt</p>
        </div>
        {% endfor %}
    </div>
</div>